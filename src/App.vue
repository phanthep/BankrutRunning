<template>
  <div v-show="isLogin">        
        <!--<img src="https://docs.google.com/uc?id=1bfRT8hQhMyGmknQ-S8PHST2CIzf5QmLc" alt="">-->        
        <div class="container-fluid">
        <div class="row">
        </div>        
        <!--<section class="vh-100" style="background-image: url(https://docs.google.com/uc?id=1bfRT8hQhMyGmknQ-S8PHST2CIzf5QmLc)">-->
        <section class="vh-200" style="background-image: url(/img/BankrutProfileImage.jpg)">
            <div class="container py-3 h-100">
                <div class="row d-flex justify-content-center align-items-center h-100">
                    <div class="col-12 col-md-8 col-lg-6 col-xl-5">
                        <div class="card shadow-2-strong" style="border-radius: 1rem; opacity: 0.9;">
                            <div class="card-body p-5">     
                                <div class="text-center">
                                    <img src="/img/RunningLogo.png" alt="Bankrut Running" class="brand-image img-circle elevation-3" style="opacity: .8">
                                    <h2>‡πÄ‡∏°‡∏ô‡∏π‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</h2>
                                </div>
                                <form @submit.prevent="SaveData" id="account" class="was-validated" novalidate>
                                    <hr />     
                                    <div class="d-flex text-center">
                                        <div class="form-check col-6">
                                        <input class="form-check-input" type="radio" id="me" v-model="runner.registerFor" value="me" checked>
                                        <label class="form-check-label" for="idSelf">
                                            <h6>‡∏â‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏≠‡∏á</h6>
                                        </label>
                                        </div>  
                                        <div class="form-check col-6">
                                        <input class="form-check-input" type="radio" id="friend" v-model="runner.registerFor" value="friend">
                                        <label class="form-check-label" for="idFriend">
                                            <h6>‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</h6>
                                        </label>
                                        </div>            
                                    </div>
                                    <div class="form-floating">
                                        <input type="text" class="form-control" id="runnerName" v-model.trim="runner.name" required>
                                        <label for="runnerName" class="form-label">‡∏ä‡∏∑‡πà‡∏≠ [‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô]</label>                                        
                                    </div>
                                    <div class="form-floating">                                        
                                        <input type="text" class="form-control" id="runnerSurname" v-model.trim="runner.surName" required>
                                        <label for="runnerSurname">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• [‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô]</label>
                                    </div>
                                    <div class="form-floating">                                        
                                        <input type="text" class="form-control" id="runnerPhoneNo" v-model.trim.number="runner.phoneNo" required>
                                        <label for="runnerPhoneNo">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå [‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ]</label>
                                    </div>
                                    <div class="form-floating">                                        
                                        <input type="text" class="form-control" id="nunnerEmail" v-model="runner.email">
                                        <label for="nunnerEmail">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                                    </div>
                                    <div class="form-floating">                                        
                                        <select class="form-control" v-model="runner.bloodType" id="nunnerBloodType" required>
                                            <option>A</option>
                                            <option>B</option>
                                            <option>AB</option>
                                            <option>O</option>
                                        </select>
                                        <label for="nunnerBloodType">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏°‡∏π‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô</label>
                                    </div>
                                    <div class="form-floating">                                        
                                        <input type="text" class="form-control" id="nunnerDisease" v-model="runner.disease">
                                        <label for="nunnerDisease">‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß</label>
                                    </div>
                                    <div class="form-floating">                                        
                                        <input type="text" class="form-control" id="emergencyContactName" v-model="runner.emergencyContactName" required>
                                        <label for="emergencyContactName">‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô</label>
                                    </div>
                                    <div class="form-floating">                                        
                                        <input type="text" class="form-control" id="emergencyPhoneNo" v-model="runner.emergencyPhoneNo" required>
                                        <label for="emergencyPhoneNo">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå [‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ]</label>
                                    </div>
                                    <!--‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
                                    <div class="form-floating">
                                        <label for="formFile" class="form-label"></label>
                                        <input class="form-control" type="file" id="formFile">
                                    </div>-->
                                    <hr/>
                                    <div class="text-center">
                                        <button type="submit" class="btn btn-lg btn-primary"><span v-show="isSubmitting" class="spinner-border spinner-border-sm mr-1"></span>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                                    </div>
                                </form>                                  
                                <div class="text-center">                
                                    <!--<button class="btn btn-lg btn-primary" @click="Save()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button> |
                                    <button class="btn btn-lg btn-primary" @click="GotoDetail()">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</button>
                                    <div>runner for : {{ runner.registerFor }}</div>
                                    <div>runner name : {{ runner.name }}</div>
                                    <div>runner sur-name : {{ runner.surName }}</div>
                                    <div>runner blood-type : {{ runner.bloodType }}</div>
                                    <div>runner disease : {{ runner.disease }}</div>-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>                
            </div>          
        </section>
    </div>    
    </div>
</template>

<script lang="ts">
import { defineComponent } from "vue";
import liff from "@line/liff";
import { reactive } from 'vue'
import Swal from 'sweetalert2'

const runner = reactive({
    userId: "",
    userName: "?",
    pictureUrl: "/img/RunningLogo.png", 
    registerFor: 'me',
    name: '',
    surName: '',
    phoneNo: '',
    email: '',
    bloodType: '',
    disease: '‡πÑ‡∏°‡πà‡∏°‡∏µ',
    emergencyContactName: '',
    emergencyPhoneNo: ''
})

export default defineComponent({
  data() {
    return {
      runner,
      isLogin: false, 
      message: "",
      error: ""
    };
  },
  mounted() {
    liff
      .init({
        liffId: import.meta.env.VITE_LIFF_ID,
        withLoginOnExternalBrowser: true
      })
      .then(async () => {
        this.message = "LIFF init succeeded.";
        const profile = await liff.getProfile();
        this.runner.pictureUrl = (profile.pictureUrl)? profile.pictureUrl : "";
        this.runner.userId = profile.userId;
        this.runner.userName = profile.displayName;
        this.isLogin = true;
      })
      .catch((e: Error) => {
        this.message = "LIFF init failed.";
        this.error = `${e}`;
      });
  },
  methods:{
    SaveData() {
        if ((runner.name.trim() != "") && (runner.surName.trim() != "")) {
        Swal.fire({
            title: "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢<br/>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö",
            html: '‡∏Ñ‡∏∏‡∏ì: ' + runner.name + ' ' + runner.surName + 
                  '<br/><br/><h3>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô 500 ‡∏ö‡∏≤‡∏ó</h3>' +
                  '<br/><h5>‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡∏™‡∏•‡∏¥‡∏ö‡∏°‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏µ‡πÄ‡∏°‡∏•</h5>' +
                  '<br/><h6>BankrutTourismBusinessClub@gmail.com</h6>' +
                  '<br/><h3>‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏±‡∏öüôè</h3>',
            imageUrl: runner.pictureUrl
          })
          .then(() => {
            liff.closeWindow();
          });
        }
        else {
            Swal.fire({
          title: "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!",
          html: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏õ‡πâ‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å<br/>‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏±‡∏öüôè',
          imageUrl: "/img/Warning.png"
        });
        }
    }
  }
});
</script>

<style>
#app {
  font-family: Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
  margin-top: 0px;
}

img {
    width:50%;
    border-radius: 50%;
}
</style>